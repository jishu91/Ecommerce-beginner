<!DOCTYPE html>
<html lang="en">

<head>
    <title>My Orders</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen">

    <%- include('partials/navbar') %>

        <!-- Header -->
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h1 class="text-3xl font-extrabold text-gray-800 mb-2">
                üì¶ My Orders
            </h1>
            <p class="text-gray-500">
                Track your purchases and order history
            </p>
            <hr class="mt-6">
        </section>

        <!-- Pagination (Top) -->
        <% if (totalPages> 1) { %>
            <div class="flex justify-center items-center gap-2 mb-6 flex-wrap">

                <% if (currentPage> 1) { %>
                    <a href="/orders?page=<%= currentPage - 1 %>"
                        class="px-4 py-2 rounded-lg border bg-white hover:bg-gray-100 transition">
                        ‚Üê Prev
                    </a>
                    <% } %>

                        <% for (let i=1; i <=totalPages; i++) { %>
                            <a href="/orders?page=<%= i %>" class="px-4 py-2 rounded-lg border transition
                    <%= i === currentPage
                        ? 'bg-indigo-600 text-white border-indigo-600'
                        : 'bg-white hover:bg-gray-100' %>">
                                <%= i %>
                            </a>
                            <% } %>

                                <% if (currentPage < totalPages) { %>
                                    <a href="/orders?page=<%= currentPage + 1 %>"
                                        class="px-4 py-2 rounded-lg border bg-white hover:bg-gray-100 transition">
                                        Next ‚Üí
                                    </a>
                                    <% } %>

            </div>
            <% } %>

                <!-- Orders Content -->
                <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-10 space-y-6">

                    <% if (orders.length===0) { %>
                        <div class="bg-white rounded-xl shadow-md p-10 text-center">
                            <div class="text-5xl mb-4">üì≠</div>
                            <h2 class="text-xl font-semibold text-gray-700 mb-1">
                                No orders placed yet
                            </h2>
                            <p class="text-gray-500">
                                Start shopping to see your orders here.
                            </p>
                        </div>
                        <% } %>

                            <% orders.forEach(order=> { %>

                                <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition p-6">

                                    <!-- Order Meta -->
                                    <div
                                        class="flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3">

                                        <div class="text-sm text-gray-500">
                                            <p>
                                                Order Date:
                                                <span class="text-gray-800 font-semibold">
                                                    <%= order.createdAt.toDateString() %>
                                                </span>
                                            </p>
                                        </div>

                                        <!-- Status -->
                                        <span class="px-4 py-1 rounded-full text-sm font-semibold w-fit
                        <%= order.status === 'Delivered'
                            ? 'bg-green-100 text-green-700'
                            : order.status === 'Pending'
                            ? 'bg-yellow-100 text-yellow-700'
                            : 'bg-gray-100 text-gray-700' %>">
                                            <%= order.status %>
                                        </span>
                                    </div>

                                    <!-- Total -->
                                    <p class="text-xl font-extrabold text-gray-800 mb-4">
                                        Total: <span class="text-indigo-600">‚Çπ <%= order.totalAmount %></span>
                                    </p>

                                    <!-- Items -->
                                    <div>
                                        <h4 class="font-semibold text-gray-700 mb-2">
                                            Items
                                        </h4>

                                        <ul class="space-y-1 text-gray-600 text-sm">
                                            <% order.items.forEach(item=> { %>
                                                <li class="flex justify-between">
                                                    <span>
                                                        <%= item.name %> √ó <%= item.quantity %>
                                                    </span>
                                                    <span class="font-medium">
                                                        ‚Çπ <%= item.price %>
                                                    </span>
                                                </li>
                                                <% }) %>
                                        </ul>
                                    </div>

                                </div>

                                <% }) %>

                </section>

</body>

</html>